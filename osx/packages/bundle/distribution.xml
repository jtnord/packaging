<?xml version="1.0" encoding="utf-8" standalone="no"?>
<installer-gui-script minSpecVersion="2">
    <title>@@PRODUCTNAME@@</title>
    <organization>@@OSX_IDPREFIX@@</organization>
    
    <background file="banner-200.png" mime-type="image/png" alignment="bottomleft"/>
    <!-- Define documents displayed at various steps -->
    <welcome    file="welcome.html"    mime-type="text/html" />
    <license    file="license.html"    mime-type="text/html" />
    <!--<readme file="installing.html" mime-type="text/html" />-->
    <!--<conclusion file="conclusion.html" mime-type="text/html" />-->

    <domains enable_anywhere="false" enable_currentUserHome="false" enable_localSystem="true"/>
    <options customize="allow" require-scripts="true" rootVolumeOnly="true" />


    <allowed-os-versions>
        <os-version min="10.6.6" />
    </allowed-os-versions>

    <!-- List all component packages -->
    <pkg-ref id="@@OSX_IDPREFIX@@.@@ARTIFACTNAME@@.war"
             version="0"
             auth="root">war.pkg</pkg-ref>
    <pkg-ref id="@@OSX_IDPREFIX@@.@@ARTIFACTNAME@@.launchd_daemon"
             version="0"
             auth="root">launchd_daemon.pkg</pkg-ref>
    <pkg-ref id="@@OSX_IDPREFIX@@.@@ARTIFACTNAME@@.launchd_@@ARTIFACTNAME@@"
             version="0"
             auth="root">launchd_@@ARTIFACTNAME@@.pkg</pkg-ref>
    <pkg-ref id="@@OSX_IDPREFIX@@.@@ARTIFACTNAME@@.support"
             version="0"
             auth="root">support.pkg</pkg-ref>
    <pkg-ref id="@@OSX_IDPREFIX@@.@@ARTIFACTNAME@@.documentation"
             version="0"
             auth="root">documentation.pkg</pkg-ref>

    <choices-outline>
        <line choice="war"/>
        <line choice="launchd">
          <line choice="launchd_daemon"/>
          <line choice="launchd_@@ARTIFACTNAME@@"/>
        </line>
        <line choice="support"/>
        <line choice="documentation"/>
    </choices-outline>

    <!-- Define each choice above -->
    <choice
        id="war"
        enabled="false"
        visible="true"
        title="@@PRODUCTNAME@@"
        description="The @@PRODUCTNAME@@ war file."
        start_selected="true">
      <pkg-ref id="@@OSX_IDPREFIX@@.@@ARTIFACTNAME@@.war"/>
    </choice>
    <choice
        id="launchd"
        enabled="true"
        visible="true"
        title="Start at boot"
        description="Select one of the options to allow jenkins to start at boot"
        start_selected="true">
    </choice>
    <choice
        id="launchd_daemon"
        enabled="!(choices.launchd_daemon.selected)"
        visible="true"
        title="Start at boot as &quot;daemon&quot;"
        description="Install a launchd config file so @@PRODUCTNAME@@ will start at boot. @@PRODUCTNAME@@ will run as user &quot;@@ARTIFACTNAME@@&quot;."
        start_selected="true">
      <pkg-ref id="@@OSX_IDPREFIX@@.@@ARTIFACTNAME@@.launchd_daemon"/>
    </choice>
    <choice
        id="launchd_@@ARTIFACTNAME@@"
        enabled="!(choices.launchd_daemon.selected)"
        visible="true"
        title="Start at boot as &quot;@@ARTIFACTNAME@@&quot;"
        description="Install a launchd config file so @@PRODUCTNAME@@ will start at boot. @@PRODUCTNAME@@ will run as user &quot;@@ARTIFACTNAME@@&quot;."
        start_selected="true">
      <pkg-ref id="@@OSX_IDPREFIX@@.@@ARTIFACTNAME@@.launchd_@@ARTIFACTNAME@@"/>
    </choice>
    <choice
        id="support"
        enabled="!(choices.launchd.selected)"
        visible="true"
        title="@@PRODUCTNAME@@ Support Files"
        description="Contains files required by the Launch Daemon"
        start_selected="true"
        selected="(!choices.support.enabled && choices.launchd.selected) || (choices.support.enabled && choices.support.selected)">
      <pkg-ref id="@@OSX_IDPREFIX@@.@@ARTIFACTNAME@@.support"/>
    </choice>
    <choice
        id="documentation"
        visible="true"
        title="Documentation"
        description="@@PRODUCTNAME@@ documentation"
        start_selected="true">
      <pkg-ref id="@@OSX_IDPREFIX@@.@@ARTIFACTNAME@@.documentation"/>
    </choice>

</installer-gui-script>